<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Hydro reservoirs, cascades and virtual reservoirs · IARA.jl</title><meta name="title" content="Hydro reservoirs, cascades and virtual reservoirs · IARA.jl"/><meta property="og:title" content="Hydro reservoirs, cascades and virtual reservoirs · IARA.jl"/><meta property="twitter:title" content="Hydro reservoirs, cascades and virtual reservoirs · IARA.jl"/><meta name="description" content="Documentation for IARA.jl."/><meta property="og:description" content="Documentation for IARA.jl."/><meta property="twitter:description" content="Documentation for IARA.jl."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="IARA.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">IARA.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">About IARA</a></li><li><span class="tocitem">Getting started</span><ul><li><a class="tocitem" href="tutorial/first_execution.html">My first execution</a></li><li><a class="tocitem" href="tutorial/case_building.html">Editing physical data</a></li><li><a class="tocitem" href="tutorial/clearing_executions.html">Editing clearing options</a></li></ul></li><li><span class="tocitem">Conceptual overview</span><ul><li><a class="tocitem" href="key_features.html">Key features of IARA</a></li><li><a class="tocitem" href="clearing_procedure.html">The market clearing structure</a></li><li class="is-active"><a class="tocitem" href="hydro_challenges.html">Hydro reservoirs, cascades and virtual reservoirs</a><ul class="internal"><li><a class="tocitem" href="#The-nature-of-hydropower"><span>The nature of hydropower</span></a></li><li><a class="tocitem" href="#SDDP-representation-of-intertemporal-optimization"><span>SDDP representation of intertemporal optimization</span></a></li><li><a class="tocitem" href="#Externalities-and-virtual-reservoirs"><span>Externalities and virtual reservoirs</span></a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Formulations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="conceptual_formulation.html">Conceptual formulations</a></li><li><a class="tocitem" href="centralized_operation_problem.html">Centralized operation problem</a></li><li><a class="tocitem" href="market_clearing_problem.html">Market clearing problem</a></li><li><a class="tocitem" href="heuristic_bids.html">Heuristic bids for bidding groups</a></li><li><a class="tocitem" href="heuristic_bids_vr.html">Heuristic bids for virtual reservoirs</a></li><li><a class="tocitem" href="supply_function_equilibrium.html">Supply Function Equilibrium</a></li><li><a class="tocitem" href="post_processing_virtual_reservoir.html">Virtual reservoirs pre and post processing</a></li><li><a class="tocitem" href="bid_limits.html">Bid price limits</a></li></ul></li></ul></li><li><span class="tocitem">Use guides and tutorials</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Building a case from scratch</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="build_a_case_from_scratch.html">Introduction</a></li><li><a class="tocitem" href="tutorial/case_01_build_base_case.html">Case creation example</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Manipulating bid data</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="bidding_formats.html">Introduction</a></li><li><a class="tocitem" href="heuristic_bid_examples.html">Heuristic bids examples</a></li><li><a class="tocitem" href="tutorial/case_03_build_profile_base_case.html">Profile bids example</a></li><li><a class="tocitem" href="tutorial/case_04_build_multi_min_activation.html">Minimum activation bids example</a></li><li><a class="tocitem" href="tutorial/case_05_build_reservoir_case.html">Virtual reservoir example</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Structuring the policy graph</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="intro_policy_graph.html">Introduction</a></li><li><a class="tocitem" href="tutorial/case_06_build_policy_graph.html">Policy graphs example: building</a></li><li><a class="tocitem" href="tutorial/case_06_run_policy_graph.html">Policy graphs example: running</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-4" type="checkbox"/><label class="tocitem" for="menuitem-4-4"><span class="docs-label">Custom Plots</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="tutorial/plots_tutorial.html">Plotting</a></li></ul></li></ul></li><li><span class="tocitem">Input and Outputs</span><ul><li><a class="tocitem" href="quiver_format.html">Quiver</a></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox"/><label class="tocitem" for="menuitem-5-2"><span class="docs-label">Input files</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="input_files.html">Input files table</a></li><li><a class="tocitem" href="how_to_input_fcf.html">How to Input a FCF File</a></li></ul></li><li><a class="tocitem" href="output_files.html">Output files</a></li></ul></li><li><span class="tocitem">Developer Docs</span><ul><li><a class="tocitem" href="contributing.html">Contributing</a></li><li><a class="tocitem" href="style_guide.html">Style guide</a></li><li><a class="tocitem" href="development_guides.html">Development guides</a></li></ul></li><li><a class="tocitem" href="iara_platform.html">IARA Platform</a></li><li><a class="tocitem" href="api_reference.html">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Conceptual overview</a></li><li class="is-active"><a href="hydro_challenges.html">Hydro reservoirs, cascades and virtual reservoirs</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="hydro_challenges.html">Hydro reservoirs, cascades and virtual reservoirs</a></li></ul></nav><div class="docs-right"><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Hydro-reservoirs,-cascades,-and-virtual-reservoirs"><a class="docs-heading-anchor" href="#Hydro-reservoirs,-cascades,-and-virtual-reservoirs">Hydro reservoirs, cascades, and virtual reservoirs</a><a id="Hydro-reservoirs,-cascades,-and-virtual-reservoirs-1"></a><a class="docs-heading-anchor-permalink" href="#Hydro-reservoirs,-cascades,-and-virtual-reservoirs" title="Permalink"></a></h1><h2 id="The-nature-of-hydropower"><a class="docs-heading-anchor" href="#The-nature-of-hydropower">The nature of hydropower</a><a id="The-nature-of-hydropower-1"></a><a class="docs-heading-anchor-permalink" href="#The-nature-of-hydropower" title="Permalink"></a></h2><p>In the context of &quot;zero marginal cost&quot; electricity systems, characterized by the contributions from variable renewable energy such as wind or solar being more than sufficient to meet demand a large majority of the time, hydro resources play an interesting role. Despite being variable in longer time scales (in the sense that hydro avaialbility is uncertain), in shorter time scales hydropower is actually highly controllable and can help accommodate variable renewable energy sources.</p><p>In addition to this flexibility of allocating the hydro resource <a href="key_features.html#glossary">between subperiods within a given period</a>, reservoir hydro plants have even more flexibility, as they can choose to allocate their water resource over a much longer time horizon (e.g. several months). For this type of intertemporal allocation, it becomes desirable to make decisions under uncertainty taking into account the opportunity cost of future water usage as a value function, drawing from the literature of <em>stochastic dynamic programming</em> and <em>stochastic dual dynamic programming</em> (SDDP).</p><p>Another feature of hydropower that is of particular relevance for assessments of market incentives and bid-based applications is the existence of hydro cascades. In a hydro cascade, the amount of water available in the downstream power plant is dependent on decisions made in the upstream power plants, which creates a codependence between these units.</p><p>Each of these features has had an impact on the development philosophy of IARA.</p><h2 id="SDDP-representation-of-intertemporal-optimization"><a class="docs-heading-anchor" href="#SDDP-representation-of-intertemporal-optimization">SDDP representation of intertemporal optimization</a><a id="SDDP-representation-of-intertemporal-optimization-1"></a><a class="docs-heading-anchor-permalink" href="#SDDP-representation-of-intertemporal-optimization" title="Permalink"></a></h2><p>In order to properly represent hydro reservoirs&#39; intertemporal management strategy and the corresponding opportunity costs, IARA incorporates functionality that is integrated with the <strong>SDDP.jl</strong> package. To this end, IARA can be run in a &quot;train mincost&quot; mode that will create the intertemporal structure necessary for describing optimal decisions under uncertainty, described in practice by a <a href="intro_policy_graph.html">&quot;policy graph&quot;</a>.</p><p>The &quot;mincost&quot; representation is not as complete as IARA&#39;s <a href="clearing_procedure.html">market clearing representation</a>, as in particular it involves simplifying the decisions each period to a single optimization problem and always using the &quot;cost-based&quot; representation rather than the &quot;bid-based&quot; one. Despite this limitation, it will produce a reasonable representation of reservoir hydro plants&#39; &quot;future cost function&quot; to drive intertemporal policy, which at the very least can be useful as an initial heuristic (that can be further refined in accordance with the bidding strategies of hydro plant owners).</p><p>The outcome of the mincost representation is a set of &quot;cuts&quot; generated iteratively by the SDDP process and which describe intertemporal preferences for reservoir hydro plants (or, more generally, for any units that involve a state variable creating a lasting impact from one period&#39;s decisions to the next). These cuts are saved as part of the <a href="key_features.html#iara&#39;s-physical-system-data">external data structure</a> of the IARA database, and will be used if needed to generate heuristic bids during the market clearing process.</p><h2 id="Externalities-and-virtual-reservoirs"><a class="docs-heading-anchor" href="#Externalities-and-virtual-reservoirs">Externalities and virtual reservoirs</a><a id="Externalities-and-virtual-reservoirs-1"></a><a class="docs-heading-anchor-permalink" href="#Externalities-and-virtual-reservoirs" title="Permalink"></a></h2><p>A classic result from economic theory is the equivalence between the solution of a central planner&#39;s optimization problem and the market equilibrium obtained from marginal pricing and profit maximization of each individual agent in the system. While this outcome is highly desirable, it relies on a number of assumptions, such as the lack of market power. The case of hydro cascades has yet another pathological issue, which is the fact that they violate the assumption of <em>no externalities</em>. Because there is no market to coordinate the joint operation of the upstream plant with the downstreap plant, price signals will be inefficient - and therefore, even as competition increases and agents&#39; market power falls, the result of the market equilibrium will not be the same as the optimal centralized policy.</p><p>This externality issue was the main motivation for the proposal of the novel virtual reservoir mechanism as a market design strategy. Even though it would be possible to eliminate the externalities via mergers and acquisitions (i.e. forcing all hydro power plants in the same cascade to have the same owner), in the case of the Brazilian electricity system this is not practical, given the large size and complexity of Brazilian cascades, which represent a large share of the system&#39;s total capacity and already involve the coordination of multiple different owners.</p><p>Under the virtual reservoir mechanism, rather than each individual asset owner being responsible for their own hydro plants and submitting bids accordingly (despite the lack of proper price signals to take into account how their bids would affect other plants in the same cascade), bids are submitted jointly for a group of hydro plants, or &quot;virtual reservoir&quot;. Ownership of the virtual reservoir is shared, in the sense that any agent can submit bids for any virtual reservoir: each agent has a &quot;virtual reservoir account&quot; that reflects the number of &quot;shares&quot; they currently own out of the total amount of potential energy currently stored in the physical reservoirs, and the maximum amount they can bid with their virtual reservoir bids is limited by the total amount in their account. The virtual reservoir representation in practice <a href="conceptual_formulation.html#the-virtual-reservoir-representation">changes the way how the optimization problem is constructed</a>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="clearing_procedure.html">« The market clearing structure</a><a class="docs-footer-nextpage" href="conceptual_formulation.html">Conceptual formulations »</a><div class="flexbox-break"></div></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Thursday 5 February 2026 20:00">Thursday 5 February 2026</span>. Using Julia version 1.11.8.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
