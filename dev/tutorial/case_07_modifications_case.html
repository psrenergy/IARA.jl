<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Modification Parameters · IARA.jl</title><meta name="title" content="Modification Parameters · IARA.jl"/><meta property="og:title" content="Modification Parameters · IARA.jl"/><meta property="twitter:title" content="Modification Parameters · IARA.jl"/><meta name="description" content="Documentation for IARA.jl."/><meta property="og:description" content="Documentation for IARA.jl."/><meta property="twitter:description" content="Documentation for IARA.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../index.html"><img src="../assets/logo.png" alt="IARA.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">IARA.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../index.html">About IARA</a></li><li><span class="tocitem">Getting started</span><ul><li><a class="tocitem" href="first_execution.html">My first execution</a></li><li><a class="tocitem" href="case_building.html">Editing physical data</a></li><li><a class="tocitem" href="clearing_executions.html">Editing clearing options</a></li></ul></li><li><span class="tocitem">Conceptual overview</span><ul><li><a class="tocitem" href="../key_features.html">Key features of IARA</a></li><li><a class="tocitem" href="../clearing_procedure.html">The market clearing structure</a></li><li><a class="tocitem" href="../hydro_challenges.html">Hydro reservoirs, cascades and virtual reservoirs</a></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Formulations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../conceptual_formulation.html">Conceptual formulations</a></li><li><a class="tocitem" href="../centralized_operation_problem.html">Centralized operation problem</a></li><li><a class="tocitem" href="../market_clearing_problem.html">Market clearing problem</a></li><li><a class="tocitem" href="../heuristic_bids.html">Heuristic bids</a></li></ul></li></ul></li><li><span class="tocitem">Use guides and tutorials</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Building a case from scratch</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../build_a_case_from_scratch.html">Introduction</a></li><li><a class="tocitem" href="case_01_build_base_case.html">Case creation example</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Manipulating bid data</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../bidding_formats.html">Introduction</a></li><li><a class="tocitem" href="../heuristic_bid_examples.html">Heuristic bids examples</a></li><li><a class="tocitem" href="case_03_build_profile_base_case.html">Profile bids example</a></li><li><a class="tocitem" href="case_04_build_multi_min_activation.html">Minimum activation bids example</a></li><li><a class="tocitem" href="case_05_build_reservoir_case.html">Virtual reservoir example</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Structuring the policy graph</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../intro_policy_graph.html">Introduction</a></li><li><a class="tocitem" href="case_06_build_policy_graph.html">Policy graphs example: building</a></li><li><a class="tocitem" href="case_06_run_policy_graph.html">Policy graphs example: running</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-4" type="checkbox"/><label class="tocitem" for="menuitem-4-4"><span class="docs-label">Custom Plots</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="plots_tutorial.html">Plotting</a></li></ul></li></ul></li><li><span class="tocitem">Input and Outputs</span><ul><li><a class="tocitem" href="../quiver_format.html">Quiver</a></li><li><a class="tocitem" href="../input_files.html">Input files</a></li><li><a class="tocitem" href="../output_files.html">Output files</a></li></ul></li><li><span class="tocitem">Developer Docs</span><ul><li><a class="tocitem" href="../contributing.html">Contributing</a></li><li><a class="tocitem" href="../style_guide.html">Style guide</a></li><li><a class="tocitem" href="../development_guides.html">Development guides</a></li></ul></li><li><a class="tocitem" href="../api_reference.html">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="case_07_modifications_case.html">Modification Parameters</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="case_07_modifications_case.html">Modification Parameters</a></li></ul></nav><div class="docs-right"><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Modification-Parameters"><a class="docs-heading-anchor" href="#Modification-Parameters">Modification Parameters</a><a id="Modification-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Modification-Parameters" title="Permalink"></a></h1><blockquote><p>The data for this case is available in the folder <a href="https://github.com/psrenergy/IARA.jl/tree/main/docs/src/tutorial/data/case_7"><code>data/case_7</code></a></p></blockquote><h2 id="Case-overview"><a class="docs-heading-anchor" href="#Case-overview">Case overview</a><a id="Case-overview-1"></a><a class="docs-heading-anchor-permalink" href="#Case-overview" title="Permalink"></a></h2><p>In this tutorial, we will understand an important concept of the IARA package: time series modifications.</p><p>If we take a look at the documentation for the constructor functions such as <a href="../api_reference.html#IARA.add_demand_unit!-Tuple{PSRClassesInterface.PSRDatabaseSQLite.DatabaseSQLite}"><code>IARA.add_demand_unit!</code></a>, <a href="../api_reference.html#IARA.add_thermal_unit!-Tuple{PSRClassesInterface.PSRDatabaseSQLite.DatabaseSQLite}"><code>IARA.add_thermal_unit!</code></a>, and <a href="../api_reference.html#IARA.add_hydro_unit!-Tuple{PSRClassesInterface.PSRDatabaseSQLite.DatabaseSQLite}"><code>IARA.add_hydro_unit!</code></a>, we can see that they all have a parameter called <code>parameters</code>.</p><p>These <code>parameters</code> are inputted as <code>DataFrames</code> and need to have at least one row, which we can call the registry of the element. This registry is used to define the initial state of the element, and it can be modified in time by adding more rows to the <code>parameters</code> DataFrame.</p><p>In this tutorial we will present a very simple example of how to use modifications parameters. We will create two Thermal Units: <code>Thermal1</code> and <code>Thermal2</code>.</p><p>The first will exist from the beginning of the case and will have a maximum generation of 20 MW and an O&amp;M cost of 10 <span>$</span>/MWh. The second will not exist at the beginning of the case, but will be ready for use on the 1st of March 2020, with an O&amp;M cost of 5 <span>$</span>/MWh and a maximum generation of 30 MW.</p><p>We expect that the first unit will stop operating after the second unit is ready for use.</p><p>However, we will add a modification for the first unit on the 1st of April 2020, where it will have a new O&amp;M cost of 3 <span>$</span>/MWh and a maximum generation of 20 MW. This will make the first unit more competitive and it will start operating again.</p><p>We&#39;ll start by importing the necessary packages.</p><pre><code class="language-julia hljs">using Dates
using DataFrames
using IARA</code></pre><p>We also need to define a directory to store the case.</p><pre><code class="language-julia hljs">const PATH_MODIFICATIONS_CASE = joinpath(@__DIR__, &quot;data&quot;, &quot;case_7&quot;)

number_of_periods = 4
number_of_subperiods = 1
number_of_scenarios = 1
subperiod_duration_in_hours = [24.0]
cycle_discount_rate = 0.1
cycle_duration_in_hours = sum(subperiod_duration_in_hours) * number_of_periods</code></pre><p>Using <a href="../api_reference.html#IARA.create_study!-Tuple{String}"><code>IARA.create_study!</code></a> we can create a new study. This function will return a database reference that will store all the information about the case.</p><p>We will set the initial date of the case to the 1st of January 2020.</p><pre><code class="language-julia hljs">db = IARA.create_study!(PATH_MODIFICATIONS_CASE;
    number_of_periods = number_of_periods,
    number_of_scenarios = number_of_scenarios,
    number_of_subperiods = number_of_subperiods,
    subperiod_duration_in_hours = subperiod_duration_in_hours,
    policy_graph_type = IARA.Configurations_PolicyGraphType.CYCLIC_WITH_NULL_ROOT,
    number_of_nodes = number_of_periods,
    cycle_discount_rate = cycle_discount_rate,
    cycle_duration_in_hours = cycle_duration_in_hours,
    demand_deficit_cost = 3000.0,
    initial_date_time = &quot;2020-01-01&quot;,
    demand_scenarios_files = IARA.Configurations_UncertaintyScenariosFiles.ONLY_EX_ANTE,
);</code></pre><h2 id="Zone-and-Bus"><a class="docs-heading-anchor" href="#Zone-and-Bus">Zone and Bus</a><a id="Zone-and-Bus-1"></a><a class="docs-heading-anchor-permalink" href="#Zone-and-Bus" title="Permalink"></a></h2><pre><code class="language-julia hljs">IARA.add_zone!(db; label = &quot;zone_1&quot;)
IARA.add_bus!(db; label = &quot;bus_1&quot;, zone_id = &quot;zone_1&quot;)</code></pre><h2 id="Demand"><a class="docs-heading-anchor" href="#Demand">Demand</a><a id="Demand-1"></a><a class="docs-heading-anchor-permalink" href="#Demand" title="Permalink"></a></h2><pre><code class="language-julia hljs">IARA.add_demand_unit!(db;
    label = &quot;dem_1&quot;,
    parameters = DataFrame(;
        date_time = [DateTime(0)],
        existing = [1],
    ),
    bus_id = &quot;bus_1&quot;,
    max_demand = 1.0,
)</code></pre><h2 id="Thermal-Units"><a class="docs-heading-anchor" href="#Thermal-Units">Thermal Units</a><a id="Thermal-Units-1"></a><a class="docs-heading-anchor-permalink" href="#Thermal-Units" title="Permalink"></a></h2><pre><code class="language-julia hljs">IARA.add_thermal_unit!(
    db;
    label = &quot;Thermal1&quot;,
    parameters = DataFrame(;
        date_time = [DateTime(0), DateTime(&quot;2020-04-01&quot;)],
        existing = [1, 1],
        max_generation = [20.0, 20.0],
        om_cost = [10.0, 3.0],
    ),
    bus_id = &quot;bus_1&quot;,
)

IARA.add_thermal_unit!(
    db;
    label = &quot;Thermal2&quot;,
    parameters = DataFrame(;
        date_time = [DateTime(0), DateTime(&quot;2020-03-01&quot;)],
        existing = [0, 1],
        max_generation = [0.0, 30.0],
        om_cost = [5.0, 5.0],
    ),
    bus_id = &quot;bus_1&quot;,
)</code></pre><h2 id="Time-Series"><a class="docs-heading-anchor" href="#Time-Series">Time Series</a><a id="Time-Series-1"></a><a class="docs-heading-anchor-permalink" href="#Time-Series" title="Permalink"></a></h2><p>Using a text editor, we have created the following CSV files containing time series information about the demand and solar generation:</p><ul><li><code>demand.csv</code></li></ul><p>You can find them in the <code>data/case_7</code> folder.</p><p>Let&#39;s take a quick look at the demand file using <a href="../api_reference.html#IARA.time_series_dataframe-Tuple{String}"><code>IARA.time_series_dataframe</code></a>.</p><pre><code class="language-julia hljs">IARA.time_series_dataframe(joinpath(PATH_MODIFICATIONS_CASE, &quot;demand.csv&quot;))</code></pre><div><div style = "float: left;"><span>4×4 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">season</th><th style = "text-align: left;">sample</th><th style = "text-align: left;">subperiod</th><th style = "text-align: left;">dem_1</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "Int64" style = "text-align: left;">Int64</th><th title = "Int64" style = "text-align: left;">Int64</th><th title = "Int64" style = "text-align: left;">Int64</th><th title = "Float32" style = "text-align: left;">Float32</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: right;">1</td><td style = "text-align: right;">1</td><td style = "text-align: right;">1</td><td style = "text-align: right;">0.06</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: right;">2</td><td style = "text-align: right;">1</td><td style = "text-align: right;">1</td><td style = "text-align: right;">0.06</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">3</td><td style = "text-align: right;">3</td><td style = "text-align: right;">1</td><td style = "text-align: right;">1</td><td style = "text-align: right;">0.06</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">4</td><td style = "text-align: right;">4</td><td style = "text-align: right;">1</td><td style = "text-align: right;">1</td><td style = "text-align: right;">0.06</td></tr></tbody></table></div><pre><code class="language-julia hljs">IARA.link_time_series_to_file(
    db,
    &quot;DemandUnit&quot;;
    demand_ex_ante = &quot;demand&quot;,
)</code></pre><h2 id="Closing-the-database"><a class="docs-heading-anchor" href="#Closing-the-database">Closing the database</a><a id="Closing-the-database-1"></a><a class="docs-heading-anchor-permalink" href="#Closing-the-database" title="Permalink"></a></h2><p>Now that we have added all the elements and linked the time series files, we can close the database to run the case with the function <a href="../api_reference.html#IARA.close_study!-Tuple{PSRClassesInterface.PSRDatabaseSQLite.DatabaseSQLite}"><code>IARA.IARA.close_study!</code></a>.</p><pre><code class="language-julia hljs">IARA.close_study!(db)</code></pre><h2 id="Running"><a class="docs-heading-anchor" href="#Running">Running</a><a id="Running-1"></a><a class="docs-heading-anchor-permalink" href="#Running" title="Permalink"></a></h2><p>Before running, let&#39;s create a separate folder for execution.</p><pre><code class="language-julia hljs">PATH_MODIFICATIONS_CASE_EXECUTION = joinpath(@__DIR__, &quot;case_7_execution&quot;)

if !isdir(PATH_MODIFICATIONS_CASE_EXECUTION)
    mkdir(PATH_MODIFICATIONS_CASE_EXECUTION)
end

cp(PATH_MODIFICATIONS_CASE, PATH_MODIFICATIONS_CASE_EXECUTION; force = true);</code></pre><p>Now we can run the case with <a href="../api_reference.html#IARA.train_min_cost-Tuple{String}"><code>IARA.train_min_cost</code></a>.</p><pre><code class="language-julia hljs">IARA.train_min_cost(PATH_MODIFICATIONS_CASE_EXECUTION)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">[ Info: IARA - version: x.x.x
[ Info:
[ Info: Execution options
[ Info:    Path: /home/runner/work/IARA.jl/IARA.jl/docs/build/tutorial/case_7_execution
[ Info:    Output path: /home/runner/work/IARA.jl/IARA.jl/docs/build/tutorial/case_7_execution/outputs
[ Info:    Run mode: TRAIN_MIN_COST
[ Info:    Plot results: true
[ Info:    periods: 4
[ Info:    scenarios: 1
[ Info:    subperiods: 1
[ Info:
[ Info: Min cost Subproblems:
[ Info:    Integer variables: CALCULATE_NORMALLY
[ Info:    Network representation: NODAL
[ Info:
[ Info: Collections
[ Info:    ThermalUnit: 2 element(s)
[ Info:    Zone: 1 element(s)
[ Info:    Bus: 1 element(s)
[ Info:    DemandUnit: 1 element(s)
[ Info:
[ Info: Time Series from external files
[ Info:    demand
[ Info:
[ Info: Cuts file:
[ Info:    No cuts file
[ Info:
-------------------------------------------------------------------
         SDDP.jl (c) Oscar Dowson and contributors, 2017-24
-------------------------------------------------------------------
problem
  nodes           : 4
  state variables : 0
  scenarios       : Inf
  existing cuts   : false
options
  solver          : serial mode
  risk measure    : SDDP.Expectation()
  sampling scheme : SDDP.InSampleMonteCarlo
subproblem structure
  VariableRef                                  : [4, 5]
  JuMP.AffExpr in MOI.EqualTo{Float64}         : [1, 1]
  JuMP.VariableRef in MOI.GreaterThan{Float64} : [3, 4]
  JuMP.VariableRef in MOI.LessThan{Float64}    : [1, 2]
  JuMP.VariableRef in MOI.Parameter{Float64}   : [1, 1]
numerical stability report
  matrix range     [1e+00, 1e+03]
  objective range  [3e-03, 3e+00]
  bounds range     [5e+02, 7e+02]
  rhs range        [0e+00, 0e+00]
-------------------------------------------------------------------
 iteration    simulation      bound        time (s)     solves  pid
-------------------------------------------------------------------
         1   1.560960e+00  4.221991e-01  7.255721e-02       309   1
        21   7.142400e-01  4.328263e-01  1.739173e+00      9887   1
        40   7.257600e-01  4.328263e-01  2.101543e+00     11432   1
-------------------------------------------------------------------
status         : simulation_stopping
total time (s) : 2.101543e+00
total solves   : 11432
best bound     :  4.328263e-01
simulation ci  :  4.034160e-01 ± 1.035174e-01
numeric issues : 0
-------------------------------------------------------------------

[ Info: Running post-processing routines
[ Info: Building plots</code></pre><h2 id="Analyzing-the-results"><a class="docs-heading-anchor" href="#Analyzing-the-results">Analyzing the results</a><a id="Analyzing-the-results-1"></a><a class="docs-heading-anchor-permalink" href="#Analyzing-the-results" title="Permalink"></a></h2><p>After running the case, the outputs are saved in the <code>outputs</code> folder inside the case folder. Inside this directory, you will find the raw results and some plots (inside the plots subdirectory).</p><pre><code class="nohighlight hljs">case_folder
 ├── outputs
 │    ├── plots
 │    │   └── ...
 │    └── ...
 └── ...</code></pre><p>Let&#39;s take a look at the thermal generation of the units.</p><iframe src="case_7_execution\\outputs\\plots\\thermal_generation_all.html" style="height:500px;width:100%;"></iframe><p>As we can see, the first unit stops operating after the second unit is ready for use, and starts operating again after the modification on the 1st of April 2020.</p><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Tuesday 13 May 2025 20:17">Tuesday 13 May 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
