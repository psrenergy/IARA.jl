<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Developer guides 路 IARA.jl</title><meta name="title" content="Developer guides 路 IARA.jl"/><meta property="og:title" content="Developer guides 路 IARA.jl"/><meta property="twitter:title" content="Developer guides 路 IARA.jl"/><meta name="description" content="Documentation for IARA.jl."/><meta property="og:description" content="Documentation for IARA.jl."/><meta property="twitter:description" content="Documentation for IARA.jl."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="IARA.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">IARA.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">About IARA</a></li><li><span class="tocitem">Getting started</span><ul><li><a class="tocitem" href="tutorial/first_execution.html">My first execution</a></li><li><a class="tocitem" href="tutorial/case_building.html">Editing physical data</a></li><li><a class="tocitem" href="tutorial/clearing_executions.html">Editing clearing options</a></li></ul></li><li><span class="tocitem">Conceptual overview</span><ul><li><a class="tocitem" href="key_features.html">Key features of IARA</a></li><li><a class="tocitem" href="clearing_procedure.html">The market clearing structure</a></li><li><a class="tocitem" href="hydro_challenges.html">Hydro reservoirs, cascades and virtual reservoirs</a></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Formulations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="conceptual_formulation.html">Conceptual formulations</a></li><li><a class="tocitem" href="centralized_operation_problem.html">Centralized operation problem</a></li><li><a class="tocitem" href="price_taker_problem.html">Price taker problem</a></li><li><a class="tocitem" href="strategic_bid_problem.html">Strategic bid problem</a></li><li><a class="tocitem" href="market_clearing_problem.html">Market clearing problem</a></li></ul></li></ul></li><li><span class="tocitem">Use guides and tutorials</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Building a case from scratch</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="build_a_case_from_scratch.html">Introduction</a></li><li><a class="tocitem" href="tutorial/case_01_build_base_case.html">Case creation example</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Manipulating bid data</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="bidding_formats.html">Introduction</a></li><li><a class="tocitem" href="tutorial/case_03_build_profile_base_case.html">Profile bids example</a></li><li><a class="tocitem" href="tutorial/case_04_build_multi_min_activation.html">Minimum activation bids example</a></li><li><a class="tocitem" href="tutorial/case_05_build_reservoir_case.html">Virtual reservoir example</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Structuring the policy graph</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="intro_policy_graph.html">Introduction</a></li><li><a class="tocitem" href="tutorial/case_06_build_policy_graph.html">Policy graphs example: building</a></li><li><a class="tocitem" href="tutorial/case_06_run_policy_graph.html">Policy graphs example: running</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-4" type="checkbox"/><label class="tocitem" for="menuitem-4-4"><span class="docs-label">Custom Plots</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="tutorial/plots_tutorial.html">Plotting</a></li></ul></li></ul></li><li><span class="tocitem">Contributing</span><ul><li><a class="tocitem" href="contributing.html">How to contribute</a></li><li class="is-active"><a class="tocitem" href="development_guides.html">Developer guides</a><ul class="internal"><li><a class="tocitem" href="#How-to-add-a-new-collection"><span>How to add a new collection</span></a></li><li><a class="tocitem" href="#How-to-add-a-new-time-series-from-external-file"><span>How to add a new time series from external file</span></a></li><li><a class="tocitem" href="#How-to-add-a-new-mathematical-model-element"><span>How to add a new mathematical model element</span></a></li><li><a class="tocitem" href="#How-to-add-a-new-post-processing-function"><span>How to add a new post-processing function</span></a></li><li><a class="tocitem" href="#How-to-add-a-new-plot"><span>How to add a new plot</span></a></li></ul></li></ul></li><li><a class="tocitem" href="api_reference.html">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Contributing</a></li><li class="is-active"><a href="development_guides.html">Developer guides</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="development_guides.html">Developer guides</a></li></ul></nav><div class="docs-right"><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Development-guides"><a class="docs-heading-anchor" href="#Development-guides">Development guides</a><a id="Development-guides-1"></a><a class="docs-heading-anchor-permalink" href="#Development-guides" title="Permalink"></a></h1><p>This section contains guides for developers who want to contribute to the development of the project.</p><h2 id="How-to-add-a-new-collection"><a class="docs-heading-anchor" href="#How-to-add-a-new-collection">How to add a new collection</a><a id="How-to-add-a-new-collection-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-add-a-new-collection" title="Permalink"></a></h2><p>The database definition of IARA.jl is based on the standards described in the <a href="https://psrenergy.github.io/PSRClassesInterface.jl/dev/psrdatabasesqlite/rules">PSRDatabaseSQLite documentation page</a>.</p><p>The first step to add a new collection is to define the tables, attributes and relationships as a migration in the database/migrations folder.</p><p>After defining the new collection in the migration file the next step is to create a new collection type in the src/collections folder. The new collection should be a subtype of the <code>AbstractCollection</code> type and should implement at least the following functions:</p><pre><code class="language-julia hljs">initialize!(my_new_collection::MyNewCollection, inputs::AbstractInputs)
add_my_new_collection!(db::DatabaseSQLite; kwargs...)
update_my_new_collection!(db::DatabaseSQLite, label::String; kwargs...)
validate(my_new_collection::MyNewCollection, inputs::AbstractInputs)
advanced_validations(my_new_collection::MyNewCollection, inputs::AbstractInputs)</code></pre><p>The last step is to add the new collection to the <a href="api_reference.html#IARA.Collections"><code>IARA.Collections</code></a> type.</p><h2 id="How-to-add-a-new-time-series-from-external-file"><a class="docs-heading-anchor" href="#How-to-add-a-new-time-series-from-external-file">How to add a new time series from external file</a><a id="How-to-add-a-new-time-series-from-external-file-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-add-a-new-time-series-from-external-file" title="Permalink"></a></h2><p>Whenever a time series varies with time and scenario we advise it to be loaded into the inputs using the <a href="api_reference.html#IARA.ViewFromExternalFile"><code>IARA.ViewFromExternalFile</code></a> abstraction. </p><p>The first step to create a new time series from external file is to define a time series file in the schema, developers can follow the <a href="https://psrenergy.github.io/PSRClassesInterface.jl/dev/psrdatabasesqlite/rules">PSRDatabaseSQLite documentation page</a> to define the time series file.</p><p>Once the time series file is defined in the schema and read into a collection developers should add a new field to the <a href="api_reference.html#IARA.TimeSeriesViewsFromExternalFiles"><code>IARA.TimeSeriesViewsFromExternalFiles</code></a> struct. The new field should be a subtype of the <a href="api_reference.html#IARA.ViewFromExternalFile"><code>IARA.ViewFromExternalFile</code></a> and could be an existing subtype or a new subtype.</p><p>After adding the new field developers should initialize it in the <a href="api_reference.html#IARA.initialize_time_series_from_external_files-Tuple{Any}"><code>IARA.initialize_time_series_from_external_files</code></a> function. When making this implementation developers should always pass the expected unit and labels of the time series.</p><h2 id="How-to-add-a-new-mathematical-model-element"><a class="docs-heading-anchor" href="#How-to-add-a-new-mathematical-model-element">How to add a new mathematical model element</a><a id="How-to-add-a-new-mathematical-model-element-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-add-a-new-mathematical-model-element" title="Permalink"></a></h2><p>Mathematical model elements are the building subperiods of the different possible optimization problems. They are defined in the <code>src/model_variables</code> or <code>src/model_constraints</code> folders. To add a new mathematical model element, developers should create a new file in the respective folder and define at least the following functions:</p><pre><code class="language-julia hljs">my_new_model_element!(
    model::SubproblemModel,
    inputs::Inputs,
    run_time_options::RunTimeOptions,
    ::Type{SubproblemBuild},
)

my_new_model_element!(
    model::SubproblemModel,
    inputs::Inputs,
    run_time_options::RunTimeOptions,
    scenario::Int,
    subscenario::Int,
    ::Type{SubproblemUpdate},
)

my_new_model_element!(
    outputs::Outputs,
    inputs::Inputs,
    run_time_options::RunTimeOptions,
    ::Type{InitializeOutput},
)

my_new_model_element!(
    outputs::Outputs,
    inputs::Inputs,
    run_time_options::RunTimeOptions,
    simulation_results::SimulationResultsFromPeriodScenario,
    period::Int,
    scenario::Int,
    subscenario::Int,
    ::Type{WriteOutput},
)</code></pre><p>Each one of these functions performs an action that is specific to the phase of the execution that it is executing at the time. The documentation for each action is available here:</p><ul><li><a href="api_reference.html#IARA.SubproblemBuild"><code>IARA.SubproblemBuild</code></a>.</li><li><a href="api_reference.html#IARA.SubproblemUpdate"><code>IARA.SubproblemUpdate</code></a>.</li><li><a href="api_reference.html#IARA.InitializeOutput"><code>IARA.InitializeOutput</code></a>.</li><li><a href="api_reference.html#IARA.WriteOutput"><code>IARA.WriteOutput</code></a>.</li></ul><p>After defining the new model element, developers should add the varargs function of the new model element to the respective optimization problem action function defined in the <code>src/mathematical_model.jl</code> file.</p><h2 id="How-to-add-a-new-post-processing-function"><a class="docs-heading-anchor" href="#How-to-add-a-new-post-processing-function">How to add a new post-processing function</a><a id="How-to-add-a-new-post-processing-function-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-add-a-new-post-processing-function" title="Permalink"></a></h2><p>All post-processing functions are defined in the <code>src/post_processing</code> folder. To add a new post-processing function, developers should create a new file in the <code>src/post_processing</code> folder and add the new function in the scope of <a href="api_reference.html#IARA.post_processing-Tuple{Any}"><code>IARA.post_processing</code></a>.</p><h2 id="How-to-add-a-new-plot"><a class="docs-heading-anchor" href="#How-to-add-a-new-plot">How to add a new plot</a><a id="How-to-add-a-new-plot-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-add-a-new-plot" title="Permalink"></a></h2><p>All plots are defined in the <code>src/plots</code> folder. To add a new plot, developers should add a new <a href="api_reference.html#IARA.PlotConfig"><code>IARA.PlotConfig</code></a> in the <a href="api_reference.html#IARA.build_plots-Tuple{IARA.Inputs}"><code>IARA.build_plots</code></a> function. </p><p>If a developer wants to implement a new plot type, they should create a new file in the <code>src/plots</code> folder and define the new plot type. The new plot type should be a concrete subtype of the <a href="api_reference.html#IARA.PlotType"><code>IARA.PlotType</code></a> abstraction and should implement the <a href="api_reference.html#IARA.plot_data"><code>IARA.plot_data</code></a> function for the corresponding new plot type.</p><p>example:</p><pre><code class="language-julia hljs">plot_data(
    ::Type{MyNewPlotType},
    data::Array{T, N},
    agent_names::Vector{String},
    dimensions::Vector{String};
    title::String = &quot;&quot;,
    unit::String = &quot;&quot;,
    file_path::String,
) where {T &lt;: AbstractFloat, N}</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="contributing.html">芦 How to contribute</a><a class="docs-footer-nextpage" href="api_reference.html">API Reference 禄</a><div class="flexbox-break"></div></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Tuesday 4 February 2025 17:39">Tuesday 4 February 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
